'use strict';mix_d("DealsSolitaireCards__deals-shoveler-v2:deals-shoveler-v2__xeRh5Usw","exports tslib @c/dom @c/aui-utils @p/a-truncate @p/gw-event-manager @p/A".split(" "),function(x,v,y,C,D,E,F){function q(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}var z=q(y),G=q(D),H=q(E),k=q(F),I=function(b){return 9<b?String(b):"0"+b},A=function(b){if(0>=b)return"00:00";var a=Math.floor(b/36E5);b=[Math.floor(b/6E4%60),Math.floor(b/1E3%60)];0<a&&b.unshift(a);return b.map(I).join(":")},K=
function(b){Array.prototype.slice.call(b.getElementsByClassName("badge-countdown-timer")).forEach(function(a){(new J(a)).start()})},J=function(){function b(a){this.timerElement=a;this.msToEvent=parseInt(a.dataset.targetTime,10);this.timerElement.innerText=A(this.msToEvent)}b.prototype.start=function(){var a=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=C.interval(function(){return a.updateTime()},500))};b.prototype.updateTime=function(){var a=Date.now()-this.counterStartTime;
0>=this.msToEvent-a&&clearInterval(this.counterInterval);this.timerElement.innerText=A(this.msToEvent-a)};return b}(),L=function(b){Array.prototype.slice.call(b.getElementsByClassName("_deals-shoveler-v2_style_badgeContainer__2V4ps")).forEach(function(a){var c,d,e,f,h=32<(null!==(d=null===(c=null===a||void 0===a?void 0:a.getBoundingClientRect())||void 0===c?void 0:c.height)&&void 0!==d?d:0)?"_deals-shoveler-v2_style_badgeTwoLineContainer__238Xf":"_deals-shoveler-v2_style_badgeOneLineContainer__SDZkK";
null===(e=null===a||void 0===a?void 0:a.classList)||void 0===e?void 0:e.remove("_deals-shoveler-v2_style_badgeLayoutCheck__DLY5W");null===(f=null===a||void 0===a?void 0:a.classList)||void 0===f?void 0:f.add(h)})},r={day:function(){return 24}},n={per:{day:function(){return n.per.hour()*r.day()},hour:function(){return 60}}},p={per:{day:function(){return p.per.hour()*r.day()},hour:function(){return p.per.minute()*n.per.hour()},minute:function(){return 60}}},g={per:{day:function(){return g.per.hour()*
r.day()},hour:function(){return g.per.minute()*n.per.hour()},minute:function(){return g.per.second()*p.per.minute()},second:function(){return 1E3}}},l={per:{day:function(){return l.per.hour()*r.day()},hour:function(){return l.per.minute()*n.per.hour()},millisecond:function(){return 1E4},minute:function(){return l.per.second()*p.per.minute()},second:function(){return l.per.millisecond()*g.per.second()}}},m;(function(b){b[b.Ticks=0]="Ticks";b[b.Milliseconds=1]="Milliseconds";b[b.Seconds=2]="Seconds";
b[b.Minutes=3]="Minutes";b[b.Hours=4]="Hours";b[b.Days=5]="Days"})(m||(m={}));var M=function(b,a){switch(a){case m.Days:return b/g.per.day();case m.Hours:return b/g.per.hour();case m.Minutes:return b/g.per.minute();case m.Seconds:return b/g.per.second();case m.Milliseconds:return b;case m.Ticks:return b*l.per.millisecond();default:throw Error("Invalid TimeUnit.");}},t=function(b,a){1!==Math.abs(b)&&(a+="s");return b+" "+a},u=function(b){function a(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];
c=b.call(this,1<c.length?a.millisecondsFromTime(c[0]||0,c[1]||0,2<c.length&&c[2]||0,3<c.length&&c[3]||0):0<c.length&&c[0]||0)||this;d=g.per;var e=Math.abs(c.getTotalMilliseconds()),f=Math.floor(e);c.tick=(e-f)*l.per.millisecond();c.day=f/d.day()|0;f-=c.day*g.per.day();c.hour=f/d.hour()|0;f-=c.hour*d.hour();c.minute=f/d.minute()|0;f-=c.minute*d.minute();c.second=f/d.second()|0;f-=c.second*d.second();c.millisecond=f;c;return c}v.__extends(a,b);a.prototype.toString=function(){var c=[];this.day&&c.push(t(this.day,
"day"));this.hour&&c.push(t(this.hour,"hour"));this.minute&&c.push(t(this.minute,"minute"));this.second&&c.push(t(this.second,"second"));1<c.length&&c.splice(c.length-1,0,"and");return c.join(", ").replace(", and, "," and ")};a.toMilliseconds=function(c){return a.millisecondsFromTime(c.hour,c.minute,c.second,c.millisecond)};a.from=function(c,d,e,f){void 0===e&&(e=0);void 0===f&&(f=0);return new a(c,d,e,f)};a.millisecondsFromTime=function(c,d,e,f){void 0===e&&(e=0);void 0===f&&(f=0);c*=n.per.hour();
c=(c+d)*p.per.minute();c+=e;c*=g.per.second();return c+=f};return a}(function(){function b(a){void 0===a&&(a=0);this._quantity=a;this.total={days:a/g.per.day(),hours:a/g.per.hour(),milliseconds:a,minutes:a/g.per.minute(),seconds:a/g.per.second(),ticks:a*l.per.millisecond()}}Object.defineProperty(b.prototype,"direction",{get:function(){return 0<this.getTotalMilliseconds()?1:0>this.getTotalMilliseconds()?-1:0},enumerable:!1,configurable:!0});b.prototype.getTotalMilliseconds=function(){return this._quantity};
b.prototype.equals=function(a){return a&&a.total?this.getTotalMilliseconds()===a.total.milliseconds:!1};b.prototype.getTotal=function(a){return M(this.getTotalMilliseconds(),a)};b.getTotalMillisecondsFrom=function(a){return a?(a.days||0)*g.per.day()+(a.hours||0)*g.per.hour()+(a.minutes||0)*g.per.minute()+(a.seconds||0)*g.per.second()+(a.milliseconds||0)+(a.ticks||0)/l.per.millisecond():0};return b}()),N=function(){function b(a,c,d,e,f){void 0===c&&(c=Infinity);void 0===d&&(d=a);this._interval=a;this._maxCount=
c;this._initialDelay=d;this._onComplete=e;this._onCountDown=f;this._count=0;if(null===a)throw Error("interval Must be a valid number.");if(0>a)throw Error("interval Cannot be negative.");}Object.defineProperty(b.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"isRunning",{get:function(){return!!this._cancel},enumerable:!1,configurable:!0});b.prototype.start=function(){if(!this._cancel&&this._count<this._maxCount){var a=setTimeout(this._onTick,
this._interval+this._initialDelay,this,!1);this._cancel=function(){clearTimeout(a)}}};b.prototype.stop=function(){this.cancel()};b.prototype.reset=function(){this.stop();this._count=0};b.prototype.complete=function(){this.cancel();this._onComplete();return this._count};b.prototype.cancel=function(){return this._cancel?(this._cancel(),this._cancel=void 0,!0):!1};b.prototype._onTick=function(a,c){var d=a._count++,e=a._maxCount,f=a._count>=e;c&&(a.cancel(),a.start());d<e&&a._onCountDown(a._interval*
(e-a._count),a._interval*a.count);if(f)a.stop(),a._onComplete();else{var h=setTimeout(a._onTick,a._interval,a,!1);a._cancel=function(){clearTimeout(h)}}};b.startNew=function(a,c,d,e,f){void 0===c&&(c=Infinity);void 0===d&&(d=a);a=new b(a,c,d,e,f);a.start();return a};return b}(),P=function(){function b(a,c){this.timerLabelElement=a.getElementsByClassName("gwTimerLabel")[0];this.timerAriaLabelElement=a.getElementsByClassName("gwTimerAriaLabel")[0];this.sharedViewModel=JSON.parse(a.dataset.sharedModel);
this.countDownTimerLabel={ariaLabel:this.timerAriaLabelElement.innerHTML,label:this.timerLabelElement.innerHTML};this.onCountDownCallback=this.onCountDownCallback.bind(this);this.onCompleteCallback=this.onCompleteCallback.bind(this);var d=this.sharedViewModel.clockTime;d=u.millisecondsFromTime(d.hour,d.minute,d.second);var e=c.interval;this.timer=new N(e,Math.floor(d/e),c.initialDelay,this.onCompleteCallback,this.onCountDownCallback);this.remainingClockTime=new u(d);this.remainingClockTimeDisplay=
new O(a)}b.prototype.start=function(){this.timer.start()};b.prototype.updateTimer=function(){this.updateLabel();this.remainingClockTimeDisplay.updateClockTime(this.remainingClockTime)};b.prototype.updateLabel=function(){this.timerLabelElement.innerHTML=this.countDownTimerLabel.label;this.timerAriaLabelElement.innerHTML=this.countDownTimerLabel.ariaLabel};b.prototype.onCountDownCallback=function(a,c){this.remainingClockTime=new u(a);var d=this.sharedViewModel.timeFormattedLabel;a=this.remainingClockTime;
c=d.formattedString;d=d.placeHolders;c=c.replace(d.hour,a.hour.toString());c=c.replace(d.minute,a.minute.toString());c=c.replace(d.second,a.second.toString());this.countDownTimerLabel={ariaLabel:c,label:this.countDownTimerLabel.label};this.updateTimer()};b.prototype.onCompleteCallback=function(){this.countDownTimerLabel=this.sharedViewModel.countDownEndLabel;this.remainingClockTime=new u(0);this.updateTimer()};b.secondsCountDownTimer=function(a){return b.from(a,{initialDelay:0,interval:1E3})};b.initializeSecondsCountDownTimers=
function(a){var c=[];b.isTimerElement(a)?c.push(b.secondsCountDownTimer(a)):Array.prototype.slice.call(a.getElementsByClassName("gwTimer")).forEach(function(d){d=b.secondsCountDownTimer(d);d.start();c.push(d)});return c};b.isTimerElement=function(a){return a.classList.contains("gwTimer")?!0:!1};b.from=function(a,c){return new b(a,c)};return b}(),O=function(){function b(a){this.hourElement=a.getElementsByClassName("gwTimerHour")[0];this.minuteElement=a.getElementsByClassName("gwTimerMinute")[0];this.secondElement=
a.getElementsByClassName("gwTimerSecond")[0];a=a.getElementsByClassName("gwTimerSeparator");this.minuteSeparatorElement=a[0];this.secondSeparatorElement=a[1]}b.prototype.updateClockTime=function(a){0<a.hour?(this.hourElement.innerHTML=("0"+a.hour.toString()).slice(-2),this.minuteSeparatorElement.classList.remove("aok-hidden")):(this.hourElement.innerHTML="",this.minuteSeparatorElement.classList.add("aok-hidden"));0<a.minute||0<a.hour?(this.minuteElement.innerHTML=("0"+a.minute.toString()).slice(-2),
this.secondSeparatorElement.classList.remove("aok-hidden")):(this.secondSeparatorElement.classList.add("aok-hidden"),this.minuteElement.innerHTML="");this.secondElement.innerHTML=0<a.second||0<a.hour||0<a.minute?("0"+a.second.toString()).slice(-2):""};return b}(),Q=function(b){Array.prototype.slice.call(b.getElementsByClassName("dealAvailabilityMessage")).forEach(function(a){a.getElementsByClassName("staticMessage")[0]||P.initializeSecondsCountDownTimers(a)})},R=function(b){Array.prototype.slice.call(b.getElementsByClassName("a-truncate")).forEach(function(a){return G["default"].get(y.unscope(a)).update()})},
T=function(b){var a=function(e){e.popover&&e.popover.getContent&&(e=e.popover.getContent(),k["default"].loadDescendantImagesManually(e))},c=function(e,f){f={$event:{preventDefault:k["default"].$.noop,stopPropagation:k["default"].$.noop},$target:e.getContent().find('[data-a-tab-name="'+f+'"]'),data:{name:"energyEfficiencyTabSet"}};k["default"].trigger("a:declarative:a-tabs:click",f);k["default"].on("a:tabs:energyEfficiencyTabSet:select",function(h){switch(h.selectedTab.tabName){case "firstTab":e.$popover.css("width",
"367px");e.$popover.css("height","600px");e.$popover.find(".a-popover-inner").css("height","600px");break;case "secondTab":e.$popover.css("width","800px"),e.$popover.css("height","1100px"),e.$popover.find(".a-popover-inner").css("height","1100px")}})},d=function(e,f){var h=e&&e.$event,w=e&&e.data||{},S=w.activeTabName,B=w.name;h&&h.preventDefault&&h.preventDefault();h&&h.stopPropagation&&h.stopPropagation();h=f.get(B);h||(k["default"].on("a:popover:beforeShow:"+B,a),h=f.create(e.$target,w));h.show();
c(h,S)};b.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(e){k["default"].declarative("card-energy-efficiency-secondary-view","click",function(f){d(f,e)})});b.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(e){k["default"].declarative("card-energy-efficiency-modal","click",function(f){d(f,e)})})},U=function(b){b.when("ready").execute("EEBadgeProductFicheResize",function(a){var c=k["default"].$;c(".energyEfficiencyContainer").each(function(d,
e){d=c(e).find(".energyEfficiencyProductFicheLabel").first();var f=c(e).find("svg").first();e.offsetWidth<d.width()+f.width()&&(d.removeClass("a-size-small"),d.addClass("a-size-micro"))})})},V=function(){var b=window.P;T(b);U(b)};x._operationNames=[];x.card=function(){return v.__awaiter(void 0,void 0,void 0,function(){var b;return v.__generator(this,function(a){V();b=z["default"].cardRoot.getAttribute("id");H["default"].whenAll([b+"-lazy-cards-loaded"],function(c){void 0===c&&(c=z["default"].cardRoot);
L(c);K(c);Q(c);R(c)});return[2]})})}});
